<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Java Script</title>
    <link rel="stylesheet" href="./editor.css">
</head>

<body>
    <main class="main">
        <div id="editor-container" class="editor-container"></div>
    </main>

    <script type="module">
        const uiFrameworkUrl = 'https://staticjs-aurigma.azureedge.net/ui-framework/4.40.3';
        const designEditorUrl = 'https://cc-farm-dev.eastus.cloudapp.azure.com/10048/design-editor/6.20.1';

        import moduleLoader from 'https://staticjs-aurigma.azureedge.net/ui-framework/4.40.3/moduleLoader.js';
        const driverModule = await moduleLoader.dynamicImport('ecommerceDriver', `${uiFrameworkUrl}/drivers/default-driver.js`);
        const editorModule = await moduleLoader.dynamicImportDefault('editor', `${uiFrameworkUrl}/editor.js`);

        const driver = driverModule.ecommerceDriver;
        const editor = editorModule.editor?.editor ?? editorModule.editor;
        const product = {
            id: 0,
            sku: 'PRODUCT-001',
            name: 'My Product',
            description: 'This is a test product.',
            options: [],
            price: 1,
            attributes: []
        };
        const config = {
            "widgets": [
                {
                    "name": "editor",
                    "type": "design-editor",
                    "params": {
                        "initial": {
                            "productDefinition": "626691a36c74336f5b0e6086",
                            "editorConfig": {
                                "initialMode": "Advanced"
                            }
                        }
                    }
                },
            ],
            "steps": [
                {
                    "name": "Editor",
                    "mainPanel": {
                        "name": "editor"
                    }
                }
            ]
        };
        const settings = {
            customersCanvasBaseUrl: `${designEditorUrl}`
        };
        const quantity = 1;
        const userModel = { id: 'test-user' };

        const ecommerce = await driver.init(
            product,
            editor,
            config,
            settings,
            null,
            quantity,
            userModel
        );
        ecommerce.products.current.renderEditor(document.getElementById('editor-container'));
    </script>

</body>

</html>